# NEWSbot - Политтехнолог Бот

Бот-помощник для политтехнологов с интеграцией искусственного интеллекта (Claude от Anthropic).

## Новые возможности (обновление)

- **Комбинированный веб-поиск**: автоматический поиск через OpenRouter API и DuckDuckGo одновременно
- **Автоматический анализ каналов**: бот автоматически анализирует добавленные Telegram каналы
- **Улучшенные поисковые запросы**: генерация более точных запросов на основе контекста и ввода пользователя
- **Расширенное логирование**: сохранение результатов поиска для дальнейшего анализа

## Основные возможности

- Анализ политической ситуации (с поддержкой веб-поиска)
- Формирование имиджа
- Работа со СМИ
- Кризисное управление
- Управление каналами Telegram
- Настраиваемые модели Claude от Anthropic через OpenRouter API

## Функция веб-поиска

Бот теперь использует комбинированный режим веб-поиска для получения максимально актуальной информации:

### Комбинированный поиск (новое)

- Автоматически активируется для категории "Анализ ситуации"
- Одновременно использует и локальный поиск через DuckDuckGo, и OpenRouter API
- Объединяет результаты разных источников для более полного анализа
- Автоматически извлекает данные из добавленных Telegram каналов
- Логирует результаты поиска для дальнейшего анализа

### Автоматический анализ каналов (новое)

- Бот автоматически анализирует Telegram каналы без запроса подтверждения
- Добавление канала происходит при отправке ссылки (формат `t.me/...` или `https://t.me/...`)
- Автоматический анализ последних сообщений и их включение в запрос к AI

## Установка и запуск

1. Клонировать репозиторий:
```
git clone https://github.com/yourusername/NEWSbot.git
cd NEWSbot
```

2. Создать виртуальное окружение Python 3.11:
```
python3.11 -m venv venv3.11
source venv3.11/bin/activate
```

3. Установить зависимости:
```
pip install -r requirements.txt
```

4. Создать файл `.env` с API ключами:
```
BOT_TOKEN=ваш_токен_бота_telegram
OPENROUTER_API_KEY=ваш_ключ_api_openrouter
```

5. Запустить бота:
```
python main.py
```

## Технические детали

- Использование aiogram для Telegram API
- Модели Claude через OpenRouter API
- Комбинированный веб-поиск через DuckDuckGo и OpenRouter API
- Автоматический анализ Telegram каналов
- Расширенное логирование результатов поиска
- Улучшенная генерация поисковых запросов с учетом контекста

## Зависимости

- aiogram==2.25.1
- python-dotenv==1.0.0
- openai==1.4.0
- python-telegram-bot==13.7
- aiohttp==3.8.5
- asyncio==3.4.3
- pyyaml==6.0.1
- telethon==1.32.0
- requests==2.32.3
- beautifulsoup4==4.13.3 